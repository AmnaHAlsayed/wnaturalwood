{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7,_templateObject8,_templateObject9,_templateObject10,_templateObject11,_templateObject12,_templateObject13,_templateObject14,_templateObject15,_templateObject16,_templateObject17,_templateObject18,_templateObject19,_templateObject20,_templateObject21,_templateObject22,_templateObject23,_templateObject24,_templateObject25,_templateObject26,_templateObject27;import{requirePropFactory}from'@material-ui/core';import{Add,Remove}from'@material-ui/icons';import React,{useState,useEffect}from'react';import styled from'styled-components';import{mobile}from'../responsive';import{useSelector,useDispatch}from'react-redux';import StripeCheckout from'react-stripe-checkout';import{publicRequest,userRequest}from'../requestMethod';import{useHistory,useParams}from'react-router';import{DeleteOutline}from\"@material-ui/icons\";import{deleteProduct,deleteAllProduct,carts}from'../redux/apiCalles';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var KEY=\"pk_test_51Jy0sVLjRsySDg5tFfXJNt6zOcT3Y5rN0CoyPocc9XwvaH2iGbEwDmu32EmflqwywYo0xUs1A1BAboIFEotZhoqE00SEJa15Xk\";var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\"])));var Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\npadding:20px;\\n\",\";\"])),mobile({padding:\"10px\"}));var Title=styled.h1(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\nfont-weight:300;\\ntext-align:center;\"])));var Top=styled.div(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\ndisplay:flex;\\nalign-items:center;\\njustify-content:space-between;'\\n\"])));var TopButton=styled.button(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\\n\\npadding: 10px;\\nfont-weight:600;\\ncursor:pointer;\\nborder:\",\";\\nbackground-color:\",\";\\ncolor :\",\";\\n\"])),function(props){return props.type===\"filled\"&&\"none\";},function(props){return props.type===\"filled \"?\"black\":\"transparent\";},function(props){return props.type===\"filled \"&&\"white\";});var TopTexts=styled.div(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n\",\";\"])),mobile({display:\"none\"}));var TopText=styled.span(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\ntext-decortion : underline;\\ncursor:pointer;\\nmargin:10px;\\n\"])));var Bottom=styled.div(_templateObject8||(_templateObject8=_taggedTemplateLiteral([\"\\ndisplay:flex;\\njustify-content:space-between;\\n\",\";\"])),mobile({flexDirection:\"column\"}));var Info=styled.div(_templateObject9||(_templateObject9=_taggedTemplateLiteral([\"\\n flex:3;\"])));var Product=styled.div(_templateObject10||(_templateObject10=_taggedTemplateLiteral([\"\\n display:flex;\\n justify-content:space-between;\\n \",\";\"])),mobile({flexDirection:\"column\"}));var ProductDetails=styled.div(_templateObject11||(_templateObject11=_taggedTemplateLiteral([\"\\n margin:50px;\\n flex:2;\\n display:flex;\\n \",\";\"])),mobile({margin:\"0px\"}));var Image=styled.img(_templateObject12||(_templateObject12=_taggedTemplateLiteral([\"\\n\\n width:50%;\\n \",\";\"])),mobile({marginTop:\"5px\",width:\"50%\"}));var Details=styled.div(_templateObject13||(_templateObject13=_taggedTemplateLiteral([\"\\n padding:20px;\\n display:flex;\\nmargin-top:15px;\\n flex-direction:column;\\n \",\";\"])),mobile({marginRight:\"20px\"}));var ProductName=styled.span(_templateObject14||(_templateObject14=_taggedTemplateLiteral([\"\"])));var ProductId=styled.span(_templateObject15||(_templateObject15=_taggedTemplateLiteral([\"\"])));var PriceDetails=styled.div(_templateObject16||(_templateObject16=_taggedTemplateLiteral([\"\\n flex:1;\\n display:flex;\\n align-items:center;\\n justify-content:center;\\n flex-direction:column;\"])));var ProductAmountContainer=styled.div(_templateObject17||(_templateObject17=_taggedTemplateLiteral([\"\\n display:flex;\\n align-items:center;\\n justify-content:center;\"])));var ProductAmount=styled.div(_templateObject18||(_templateObject18=_taggedTemplateLiteral([\"\\n font-size:24px;\\n margin:5px;\\n \",\";\"])),mobile({margin:\"5px 15px\"}));var ProductPrice=styled.div(_templateObject19||(_templateObject19=_taggedTemplateLiteral([\"\\nfont-size:30px;\\nfont-weight:300;\\n\",\";\\n\"])),mobile({marginBottom:\"5px \"}));var Summary=styled.div(_templateObject20||(_templateObject20=_taggedTemplateLiteral([\"\\n flex:1;\\n border:0.5px solid lightgray;\\n border-radius:10px;\\n padding:20px;\\n height:50vh;\\n \"])));var Hr=styled.hr(_templateObject21||(_templateObject21=_taggedTemplateLiteral([\"\\n background-color:#eee;\\n border:none;\\n height:1px;\"])));var SummaryTitle=styled.h1(_templateObject22||(_templateObject22=_taggedTemplateLiteral([\"\\n font-weight:200;\"])));var SummaryItem=styled.div(_templateObject23||(_templateObject23=_taggedTemplateLiteral([\"\\n margin : 30px 0px;\\n display:flex;\\n justify-content:space-between;\"])));var SummaryItemText=styled.span(_templateObject24||(_templateObject24=_taggedTemplateLiteral([\"\"])));var SummaryItemPrice=styled.span(_templateObject25||(_templateObject25=_taggedTemplateLiteral([\"\"])));var SummaryButton=styled.button(_templateObject26||(_templateObject26=_taggedTemplateLiteral([\"\\n width:100%;\\n padding:10px;\\n background-color:white;\\n font-weight:600;\"])));var Icon=styled.div(_templateObject27||(_templateObject27=_taggedTemplateLiteral([\"\\nwidth:40px;\\nheight:40px;\\nborder-radius:50%;\\nbackground-color:white;\\ndisplay:flex;\\nalign-items:center;\\njustify-content:center;\\nmargin:10px;\\ntransition: all 0.5s ease ;\\n&:hover{\\n    background-color:#e9f5f5;\\n    transform:scale(1.1);\\n}\\ncursor:pointer;\\n\\n\"])));var Cart=function Cart(){var cart=useSelector(function(state){return state.cart;});var productt=useSelector(function(state){return state.cart.products;});var user=useSelector(function(state){return state.user.currentUser;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),stripeToken=_useState2[0],setStripeToken=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),product=_useState4[0],setProduct=_useState4[1];var dispatch=useDispatch();var history=useHistory();var onToken=function onToken(token){setStripeToken(token);};useEffect(function(){var makeRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post(\"/stripe/payment\",{tokenId:stripeToken.id,amount:cart.total*100});case 3:res=_context.sent;history.push(\"/success\",{stripeData:res.data,cart:cart});console.log(cart);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function makeRequest(){return _ref.apply(this,arguments);};}();stripeToken&&makeRequest();},[stripeToken,cart.total,history]);var handleDelete=function handleDelete(id){deleteProduct(id,dispatch);};var handleDeleteAllProduct=function handleDeleteAllProduct(){deleteAllProduct(dispatch);};return/*#__PURE__*/_jsx(Container,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(Title,{children:\"Your BAG\"}),/*#__PURE__*/_jsxs(Top,{children:[/*#__PURE__*/_jsx(TopButton,{type:\"filled\",children:\"Continoue Shopping\"}),/*#__PURE__*/_jsxs(TopTexts,{children:[/*#__PURE__*/_jsxs(TopText,{children:[\"Shopping Bag(\",cart.quantity,\")\"]}),/*#__PURE__*/_jsx(TopText,{children:\"Your Wishlist\"})]}),/*#__PURE__*/_jsx(TopButton,{type:\"filled\",onClick:handleDeleteAllProduct,children:\"Clear Cart\"})]}),/*#__PURE__*/_jsxs(Bottom,{children:[/*#__PURE__*/_jsxs(Info,{children:[cart.products.map(function(product){return/*#__PURE__*/_jsxs(Product,{children:[/*#__PURE__*/_jsxs(ProductDetails,{children:[/*#__PURE__*/_jsx(Image,{src:product.img}),/*#__PURE__*/_jsxs(Details,{children:[/*#__PURE__*/_jsxs(ProductName,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Product: \"}),product.title]}),/*#__PURE__*/_jsxs(ProductId,{children:[/*#__PURE__*/_jsx(\"b\",{children:\"ID: \"}),product._id]})]})]}),/*#__PURE__*/_jsxs(PriceDetails,{children:[/*#__PURE__*/_jsx(ProductAmountContainer,{children:/*#__PURE__*/_jsx(ProductAmount,{children:product.quantity})}),/*#__PURE__*/_jsxs(ProductPrice,{children:[\" \",product.price*product.quantity,\"Dhs\"]})]}),/*#__PURE__*/_jsxs(Icon,{children:[\"  \",/*#__PURE__*/_jsx(DeleteOutline,{onClick:function onClick(){return handleDelete(product._id);}})]})]});}),/*#__PURE__*/_jsx(Hr,{})]}),/*#__PURE__*/_jsxs(Summary,{children:[/*#__PURE__*/_jsx(SummaryTitle,{children:\"Order Summary\"}),/*#__PURE__*/_jsxs(SummaryItem,{children:[/*#__PURE__*/_jsx(SummaryItemText,{type:\"total\",children:\"SubTotal\"}),/*#__PURE__*/_jsxs(SummaryItemPrice,{children:[cart.total,\"Dhs\"]})]}),user?/*#__PURE__*/_jsx(StripeCheckout,{name:\"Natural Wood\",billingAddress:true,shippingAddress:true,description:\"Your total is \".concat(cart.total),amount:cart.total*100,token:onToken,stripeKey:KEY,children:/*#__PURE__*/_jsx(SummaryButton,{children:\"Check Out\"})}):/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})})]})]})]})});};export default Cart;","map":{"version":3,"sources":["C:/Users/Hp/Desktop/NaturalWood/naturalwood/src/Pages/Cart.js"],"names":["requirePropFactory","Add","Remove","React","useState","useEffect","styled","mobile","useSelector","useDispatch","StripeCheckout","publicRequest","userRequest","useHistory","useParams","DeleteOutline","deleteProduct","deleteAllProduct","carts","Link","KEY","Container","div","Wrapper","padding","Title","h1","Top","TopButton","button","props","type","TopTexts","display","TopText","span","Bottom","flexDirection","Info","Product","ProductDetails","margin","Image","img","marginTop","width","Details","marginRight","ProductName","ProductId","PriceDetails","ProductAmountContainer","ProductAmount","ProductPrice","marginBottom","Summary","Hr","hr","SummaryTitle","SummaryItem","SummaryItemText","SummaryItemPrice","SummaryButton","Icon","Cart","cart","state","productt","products","user","currentUser","stripeToken","setStripeToken","product","setProduct","dispatch","history","onToken","token","makeRequest","post","tokenId","id","amount","total","res","push","stripeData","data","console","log","handleDelete","handleDeleteAllProduct","quantity","map","title","_id","price"],"mappings":"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","sourcesContent":["import { requirePropFactory } from '@material-ui/core';\r\nimport { Add, Remove } from '@material-ui/icons';\r\nimport React,{ useState ,useEffect} from 'react'\r\nimport styled from 'styled-components';\r\nimport { mobile } from '../responsive';\r\nimport { useSelector ,useDispatch } from 'react-redux';\r\nimport StripeCheckout from 'react-stripe-checkout';\r\nimport {publicRequest, userRequest} from '../requestMethod';\r\nimport { useHistory, useParams } from 'react-router';\r\nimport { DeleteOutline } from \"@material-ui/icons\";\r\nimport { deleteProduct,deleteAllProduct, carts } from '../redux/apiCalles';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst KEY = \"pk_test_51Jy0sVLjRsySDg5tFfXJNt6zOcT3Y5rN0CoyPocc9XwvaH2iGbEwDmu32EmflqwywYo0xUs1A1BAboIFEotZhoqE00SEJa15Xk\"\r\nconst Container = styled.div``\r\nconst Wrapper = styled.div`\r\npadding:20px;\r\n${mobile({padding:\"10px\"})};`\r\nconst Title = styled.h1`\r\nfont-weight:300;\r\ntext-align:center;`\r\nconst Top = styled.div`\r\ndisplay:flex;\r\nalign-items:center;\r\njustify-content:space-between;'\r\n`\r\nconst TopButton = styled.button`\r\n\r\npadding: 10px;\r\nfont-weight:600;\r\ncursor:pointer;\r\nborder:${(props)=>props.type === \"filled\" && \"none\"};\r\nbackground-color:${(props)=>props.type === \"filled \" ? \"black\" : \"transparent\"};\r\ncolor :${(props)=>props.type === \"filled \" && \"white\"};\r\n`\r\nconst TopTexts = styled.div`\r\n${mobile({display:\"none\"})};`\r\nconst TopText = styled.span`\r\ntext-decortion : underline;\r\ncursor:pointer;\r\nmargin:10px;\r\n`\r\nconst Bottom = styled.div`\r\ndisplay:flex;\r\njustify-content:space-between;\r\n${mobile({flexDirection:\"column\"})};`\r\n const Info = styled.div`\r\n flex:3;`\r\n const Product = styled.div`\r\n display:flex;\r\n justify-content:space-between;\r\n ${mobile({flexDirection:\"column\"})};`\r\n const ProductDetails = styled.div`\r\n margin:50px;\r\n flex:2;\r\n display:flex;\r\n ${mobile({ margin:\"0px\"})};`\r\n const Image = styled.img`\r\n\r\n width:50%;\r\n ${mobile({marginTop:\"5px\",width:\"50%\"})};`\r\n const Details = styled.div`\r\n padding:20px;\r\n display:flex;\r\nmargin-top:15px;\r\n flex-direction:column;\r\n ${mobile({marginRight:\"20px\"})};`\r\n const ProductName = styled.span``\r\n const ProductId = styled.span``\r\n const PriceDetails = styled.div`\r\n flex:1;\r\n display:flex;\r\n align-items:center;\r\n justify-content:center;\r\n flex-direction:column;`\r\n const  ProductAmountContainer = styled.div`\r\n display:flex;\r\n align-items:center;\r\n justify-content:center;`\r\n const ProductAmount = styled.div`\r\n font-size:24px;\r\n margin:5px;\r\n ${mobile({margin:\"5px 15px\"})};`\r\nconst ProductPrice = styled.div`\r\nfont-size:30px;\r\nfont-weight:300;\r\n${mobile({marginBottom:\"5px \"})};\r\n`\r\n const Summary = styled.div`\r\n flex:1;\r\n border:0.5px solid lightgray;\r\n border-radius:10px;\r\n padding:20px;\r\n height:50vh;\r\n `\r\n const Hr = styled.hr`\r\n background-color:#eee;\r\n border:none;\r\n height:1px;`\r\n const SummaryTitle=styled.h1`\r\n font-weight:200;`\r\n const SummaryItem=styled.div`\r\n margin : 30px 0px;\r\n display:flex;\r\n justify-content:space-between;`\r\n const SummaryItemText=styled.span``\r\n const SummaryItemPrice=styled.span``\r\n const SummaryButton = styled.button`\r\n width:100%;\r\n padding:10px;\r\n background-color:white;\r\n font-weight:600;`\r\n\r\n const Icon = styled.div`\r\nwidth:40px;\r\nheight:40px;\r\nborder-radius:50%;\r\nbackground-color:white;\r\ndisplay:flex;\r\nalign-items:center;\r\njustify-content:center;\r\nmargin:10px;\r\ntransition: all 0.5s ease ;\r\n&:hover{\r\n    background-color:#e9f5f5;\r\n    transform:scale(1.1);\r\n}\r\ncursor:pointer;\r\n\r\n`\r\n const Cart=()=> {\r\n      const cart = useSelector(state => state.cart);\r\n      const productt= useSelector(state => state.cart.products)\r\n     const user = useSelector(state => state.user.currentUser)\r\n      const [stripeToken,setStripeToken]=useState(null);\r\n      const [product ,setProduct]= useState({})\r\n      const dispatch = useDispatch();\r\n      const history = useHistory();\r\n      const onToken = (token)=>{\r\nsetStripeToken(token);\r\n\r\n      };\r\n      useEffect(() => {\r\n        const makeRequest = async()=>{\r\n            try{\r\nconst res = await userRequest.post(\"/stripe/payment\",{\r\n    tokenId:stripeToken.id, \r\n    amount: cart.total*100,\r\n    \r\n   \r\n}); history.push(\"/success\" ,{  stripeData: res.data,\r\n   cart, });\r\nconsole.log(cart);\r\n            }catch(err){}\r\n        }\r\n     stripeToken &&  makeRequest();\r\n          }\r\n      , [stripeToken, cart.total ,history])\r\n  \r\n      const handleDelete = (id) => {\r\n        deleteProduct(id,dispatch);\r\n       };\r\n       const handleDeleteAllProduct = () => {\r\n        deleteAllProduct(dispatch);\r\n       };\r\n  \r\n\r\n     \r\n    return (\r\n      <Container>\r\n<Wrapper>\r\n    <Title>\r\n        Your BAG\r\n    </Title>\r\n    <Top>\r\n        <TopButton type=\"filled\">Continoue Shopping</TopButton>\r\n        <TopTexts>\r\n            <TopText>Shopping Bag({cart.quantity})</TopText>\r\n            <TopText>Your Wishlist</TopText>\r\n        </TopTexts>\r\n        <TopButton type=\"filled\"  onClick={handleDeleteAllProduct}>Clear Cart</TopButton>\r\n    </Top>\r\n    <Bottom>\r\n        <Info>\r\n    {cart.products.map((product)=><Product>\r\n        <ProductDetails>\r\n            <Image src={product.img} />\r\n        \r\n            <Details>\r\n                <ProductName><b>Product: </b>{product.title}</ProductName>\r\n                <ProductId><b>ID: </b>{product._id}</ProductId>\r\n            </Details>\r\n        </ProductDetails>\r\n        <PriceDetails>\r\n            <ProductAmountContainer>\r\n          \r\n            <ProductAmount>{product.quantity}</ProductAmount>\r\n          \r\n            </ProductAmountContainer>\r\n            <ProductPrice> {product.price * product.quantity}Dhs</ProductPrice>\r\n            </PriceDetails> \r\n            <Icon>  <DeleteOutline\r\n \r\n onClick={() => handleDelete(product._id)}/>\r\n  </Icon> \r\n    </Product>\r\n    )}\r\n            <Hr />\r\n           \r\n        </Info>\r\n           <Summary>\r\n            <SummaryTitle>Order Summary</SummaryTitle>\r\n            <SummaryItem>\r\n                <SummaryItemText type=\"total\">SubTotal</SummaryItemText>\r\n                <SummaryItemPrice>{cart.total}Dhs</SummaryItemPrice>\r\n      </SummaryItem>\r\n            {user? <StripeCheckout name=\"Natural Wood\"\r\n            billingAddress\r\n            shippingAddress\r\n            description={`Your total is ${cart.total}`}\r\n            amount = {cart.total*100}\r\n            token={onToken}\r\n            stripeKey={KEY}\r\n            >\r\n               \r\n            <SummaryButton >Check Out</SummaryButton>\r\n            </StripeCheckout>:<h2><Link to=\"/login\">Login</Link></h2> }\r\n        </Summary>\r\n    </Bottom>\r\n</Wrapper>\r\n      </Container>\r\n    )\r\n}\r\n\r\nexport default Cart;\r\n"]},"metadata":{},"sourceType":"module"}