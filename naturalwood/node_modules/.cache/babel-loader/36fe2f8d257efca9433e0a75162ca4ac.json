{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"C:/Users/Hp/Desktop/NaturalWood/naturalwood/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useLocation}from\"react-router\";import{userRequest}from\"../requestMethod\";import styled from\"styled-components\";import{mobile}from\"../responsive\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Contanier=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  height:calc(100vh - 50px);\\ndisplay: flex;\\nalign-items: center;\\njustify-content: center;\"])));var Wrapper=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\nwidth: 60%;\\nheight: 75%;\\n-webkit-box-shadow:0px 5px 33px -21px  rgba(66,68,90,1);\\n-moz-box-shadow:0px 5px 33px -21px  rgba(66,68,90,1);\\nbox-shadow: 0px 5px 33px -21px  rgba(66,68,90,1);\\ndisplay: flex;\\nalign-items: center;\\nborder-radius: 20px;\\nflex-direction:column;\\n;\"])));var Success=function Success(){var location=useLocation();//in Cart.jsx I sent data and cart. Please check that page for the changes.(in video it's only data)\nvar data=location.state.stripeData;var cart=location.state.cart;var currentUser=useSelector(function(state){return state.user.currentUser;});var _useState=useState(null),_useState2=_slicedToArray(_useState,2),orderId=_useState2[0],setOrderId=_useState2[1];useEffect(function(){var createOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return userRequest.post(\"/orders\",{userId:currentUser._id,mobileNumber:currentUser.mobileNumber,products:cart.products.map(function(item){return{productId:item._id,quantity:item._quantity};}),amount:cart.total,address:data.billing_details.address});case 3:res=_context.sent;console.log(res.data);setOrderId(res.data._id);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function createOrder(){return _ref.apply(this,arguments);};}();data&&createOrder();},[cart,data,currentUser]);return/*#__PURE__*/_jsx(Contanier,{children:/*#__PURE__*/_jsxs(Wrapper,{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginRight:50,marginLeft:50},children:\"Youre Order will be deliverd within two days\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{style:{marginRight:50,marginLeft:50},children:[\"   \",orderId?\"Order has been created successfully.\\n         Your order number is   \".concat(orderId):\"Successfull. Your order is being prepared...\"]}),/*#__PURE__*/_jsx(\"button\",{style:{padding:10,marginTop:20},children:/*#__PURE__*/_jsx(Link,{style:{color:\"inherit\",textDecoration:\"none\",margin:20,fontWeight:700},to:\"/\",children:\"Go to Homepage\"})})]})});};export default Success;","map":{"version":3,"sources":["C:/Users/Hp/Desktop/NaturalWood/naturalwood/src/Pages/Success.js"],"names":["Link","useEffect","useState","useSelector","useLocation","userRequest","styled","mobile","Contanier","div","Wrapper","Success","location","data","state","stripeData","cart","currentUser","user","orderId","setOrderId","createOrder","post","userId","_id","mobileNumber","products","map","item","productId","quantity","_quantity","amount","total","address","billing_details","res","console","log","marginRight","marginLeft","padding","marginTop","color","textDecoration","margin","fontWeight"],"mappings":"0iBAAA,OAASA,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,MAAT,KAAuB,eAAvB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAEF,MAAM,CAACG,GAAT,+JAAf,CAOA,GAAMC,CAAAA,OAAO,CAAGJ,MAAM,CAACG,GAAV,yVAAb,CAYA,GAAME,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,CACpB,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA;AACA,GAAMS,CAAAA,IAAI,CAAGD,QAAQ,CAACE,KAAT,CAAeC,UAA5B,CACA,GAAMC,CAAAA,IAAI,CAAGJ,QAAQ,CAACE,KAAT,CAAeE,IAA5B,CACA,GAAMC,CAAAA,WAAW,CAAGd,WAAW,CAAC,SAACW,KAAD,QAAWA,CAAAA,KAAK,CAACI,IAAN,CAAWD,WAAtB,EAAD,CAA/B,CACA,cAA8Bf,QAAQ,CAAC,IAAD,CAAtC,wCAAOiB,OAAP,eAAgBC,UAAhB,eAEAnB,SAAS,CAAC,UAAM,CACd,GAAMoB,CAAAA,WAAW,0FAAG,iLAEEhB,CAAAA,WAAW,CAACiB,IAAZ,CAAiB,SAAjB,CAA4B,CAC5CC,MAAM,CAAEN,WAAW,CAACO,GADwB,CAE5CC,YAAY,CAACR,WAAW,CAACQ,YAFmB,CAG5CC,QAAQ,CAAEV,IAAI,CAACU,QAAL,CAAcC,GAAd,CAAkB,SAACC,IAAD,QAAW,CACrCC,SAAS,CAAED,IAAI,CAACJ,GADqB,CAErCM,QAAQ,CAAEF,IAAI,CAACG,SAFsB,CAAX,EAAlB,CAHkC,CAO5CC,MAAM,CAAEhB,IAAI,CAACiB,KAP+B,CAQ5CC,OAAO,CAAErB,IAAI,CAACsB,eAAL,CAAqBD,OARc,CAA5B,CAFF,QAEVE,GAFU,eAWXC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACvB,IAAhB,EACLO,UAAU,CAACgB,GAAG,CAACvB,IAAJ,CAASW,GAAV,CAAV,CAZgB,mJAAH,kBAAXH,CAAAA,WAAW,0CAAjB,CAgBAR,IAAI,EAAIQ,WAAW,EAAnB,CACD,CAlBQ,CAkBN,CAACL,IAAD,CAAOH,IAAP,CAAaI,WAAb,CAlBM,CAAT,CAoBA,mBACF,KAAC,SAAD,wBACE,MAAC,OAAD,yBACE,WAAI,KAAK,CAAE,CAACsB,WAAW,CAAC,EAAb,CAAgBC,UAAU,CAAC,EAA3B,CAAX,0DADF,cAEE,aAFF,cAGC,YAAI,KAAK,CAAE,CAAED,WAAW,CAAE,EAAf,CAAmBC,UAAU,CAAC,EAA9B,CAAX,iBAAmDrB,OAAO,iFAE3BA,OAF2B,gDAA1D,GAHD,cAQI,eAAS,KAAK,CAAE,CACrBsB,OAAO,CAAE,EADY,CACRC,SAAS,CAAE,EADH,CAAhB,uBACyB,KAAC,IAAD,EAAM,KAAK,CAAE,CAAIC,KAAK,CAAC,SAAV,CAC3CC,cAAc,CAAE,MAD2B,CAE3CC,MAAM,CAAE,EAFmC,CAG3CC,UAAU,CAAE,GAH+B,CAAb,CAGZ,EAAE,CAAC,GAHS,4BADzB,EARJ,GADF,EADE,CAiBD,CA7CD,CA+CA,cAAenC,CAAAA,OAAf","sourcesContent":["import { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useLocation } from \"react-router\";\r\nimport { userRequest } from \"../requestMethod\";\r\nimport styled from \"styled-components\";\r\nimport { mobile } from \"../responsive\";\r\n\r\nconst Contanier= styled.div`\r\n  height:calc(100vh - 50px);\r\ndisplay: flex;\r\nalign-items: center;\r\njustify-content: center;`\r\n\r\n\r\nconst Wrapper = styled.div`\r\nwidth: 60%;\r\nheight: 75%;\r\n-webkit-box-shadow:0px 5px 33px -21px  rgba(66,68,90,1);\r\n-moz-box-shadow:0px 5px 33px -21px  rgba(66,68,90,1);\r\nbox-shadow: 0px 5px 33px -21px  rgba(66,68,90,1);\r\ndisplay: flex;\r\nalign-items: center;\r\nborder-radius: 20px;\r\nflex-direction:column;\r\n;`\r\n\r\nconst Success = () => {\r\n  const location = useLocation();\r\n  //in Cart.jsx I sent data and cart. Please check that page for the changes.(in video it's only data)\r\n  const data = location.state.stripeData;\r\n  const cart = location.state.cart;\r\n  const currentUser = useSelector((state) => state.user.currentUser);\r\n  const [orderId, setOrderId] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const createOrder = async () => {\r\n      try {\r\n        const res = await userRequest.post(\"/orders\", {\r\n          userId: currentUser._id,\r\n          mobileNumber:currentUser.mobileNumber,\r\n          products: cart.products.map((item) => ({\r\n            productId: item._id,\r\n            quantity: item._quantity,\r\n          })),\r\n          amount: cart.total,\r\n          address: data.billing_details.address,\r\n        });  console.log(res.data);\r\n        setOrderId(res.data._id);\r\n      \r\n      } catch {}\r\n    };\r\n    data && createOrder();\r\n  }, [cart, data, currentUser]);\r\n\r\n  return (\r\n<Contanier>\r\n  <Wrapper>\r\n    <h2 style={{marginRight:50,marginLeft:50}}>Youre Order will be deliverd within two days</h2>\r\n    <br/>\r\n   <h3 style={{ marginRight: 50 ,marginLeft:50}} >   {orderId\r\n        ? `Order has been created successfully.\r\n         Your order number is   ${orderId}`\r\n        : `Successfull. Your order is being prepared...`}</h3>\r\n \r\n      <button  style={{ \r\n padding: 10, marginTop: 20 }}><Link style={{   color:\"inherit\",\r\n textDecoration: \"none\",\r\n margin: 20,\r\n fontWeight: 700}} to=\"/\">Go to Homepage</Link></button>\r\n    </Wrapper>\r\n</Contanier>  );\r\n};\r\n\r\nexport default Success;"]},"metadata":{},"sourceType":"module"}